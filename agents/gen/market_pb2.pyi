"""
Type stubs for market_pb2 — generated by protoc but invisible to Pylance
because the actual field attributes are built at runtime by the descriptor
machinery. This file gives Pylance (and other type checkers) a static view.
"""

from __future__ import annotations
from typing import Optional, Sequence
from google.protobuf.message import Message

# ─── enums ────────────────────────────────────────────────────────────────────

class OrderSide:
    ORDER_SIDE_UNSPECIFIED: int
    ORDER_SIDE_BUY: int
    ORDER_SIDE_SELL: int

class OrderType:
    ORDER_TYPE_UNSPECIFIED: int
    ORDER_TYPE_LIMIT: int
    ORDER_TYPE_MARKET: int

class OrderStatus:
    ORDER_STATUS_UNSPECIFIED: int
    ORDER_STATUS_ACCEPTED: int
    ORDER_STATUS_REJECTED: int

class CancelStatus:
    CANCEL_STATUS_UNSPECIFIED: int
    CANCEL_STATUS_CANCELED: int
    CANCEL_STATUS_NOT_FOUND: int
    CANCEL_STATUS_REJECTED: int

# module-level enum constants
ORDER_SIDE_UNSPECIFIED: int
ORDER_SIDE_BUY: int
ORDER_SIDE_SELL: int
ORDER_TYPE_UNSPECIFIED: int
ORDER_TYPE_LIMIT: int
ORDER_TYPE_MARKET: int
ORDER_STATUS_UNSPECIFIED: int
ORDER_STATUS_ACCEPTED: int
ORDER_STATUS_REJECTED: int
CANCEL_STATUS_UNSPECIFIED: int
CANCEL_STATUS_CANCELED: int
CANCEL_STATUS_NOT_FOUND: int
CANCEL_STATUS_REJECTED: int

# ─── order messages ───────────────────────────────────────────────────────────

class SubmitOrderRequest(Message):
    agent_id: str
    symbol: str
    side: int
    type: int
    qty: int
    price_ticks: Optional[int]
    client_order_id: int
    def __init__(
        self,
        *,
        agent_id: str = ...,
        symbol: str = ...,
        side: int = ...,
        type: int = ...,
        qty: int = ...,
        price_ticks: Optional[int] = ...,
        client_order_id: int = ...,
    ) -> None: ...
    def HasField(self, field_name: str) -> bool: ...

class SubmitOrderResponse(Message):
    order_id: str
    status: int
    reason: str
    def __init__(
        self,
        *,
        order_id: str = ...,
        status: int = ...,
        reason: str = ...,
    ) -> None: ...

class CancelOrderRequest(Message):
    order_id: str
    agent_id: str
    def __init__(self, *, order_id: str = ..., agent_id: str = ...) -> None: ...

class CancelOrderResponse(Message):
    status: int
    reason: str
    def __init__(self, *, status: int = ..., reason: str = ...) -> None: ...

# ─── streaming / market data ──────────────────────────────────────────────────

class MarketDataRequest(Message):
    symbol: str
    include_order_book: bool
    include_candles: bool
    def __init__(
        self,
        *,
        symbol: str = ...,
        include_order_book: bool = ...,
        include_candles: bool = ...,
    ) -> None: ...

class TradeStreamRequest(Message):
    symbol: str
    def __init__(self, *, symbol: str = ...) -> None: ...

class PriceLevel(Message):
    price_ticks: int
    qty: int
    def __init__(self, *, price_ticks: int = ..., qty: int = ...) -> None: ...

class OrderBookUpdate(Message):
    symbol: str
    bids: Sequence[PriceLevel]
    asks: Sequence[PriceLevel]
    def __init__(
        self,
        *,
        symbol: str = ...,
        bids: Sequence[PriceLevel] = ...,
        asks: Sequence[PriceLevel] = ...,
    ) -> None: ...

class CandleClosed(Message):
    symbol: str
    interval_ms: int
    start_tick: int
    open: int
    high: int
    low: int
    close: int
    volume: int
    def __init__(
        self,
        *,
        symbol: str = ...,
        interval_ms: int = ...,
        start_tick: int = ...,
        open: int = ...,
        high: int = ...,
        low: int = ...,
        close: int = ...,
        volume: int = ...,
    ) -> None: ...

class TickEvent(Message):
    tick: int
    server_time_unix_ms: int
    def __init__(self, *, tick: int = ..., server_time_unix_ms: int = ...) -> None: ...

class MarketDataEvent(Message):
    order_book: OrderBookUpdate
    candle: CandleClosed
    tick: TickEvent
    def __init__(
        self,
        *,
        order_book: Optional[OrderBookUpdate] = ...,
        candle: Optional[CandleClosed] = ...,
        tick: Optional[TickEvent] = ...,
    ) -> None: ...
    def HasField(self, field_name: str) -> bool: ...
    def WhichOneof(self, oneof_group: str) -> Optional[str]: ...

class TradeEvent(Message):
    trade_id: str
    symbol: str
    price_ticks: int
    qty: int
    buy_order_id: str
    sell_order_id: str
    tick: int
    def __init__(
        self,
        *,
        trade_id: str = ...,
        symbol: str = ...,
        price_ticks: int = ...,
        qty: int = ...,
        buy_order_id: str = ...,
        sell_order_id: str = ...,
        tick: int = ...,
    ) -> None: ...

# ─── portfolio messages ───────────────────────────────────────────────────────

class PositionEntry(Message):
    symbol: str
    qty: int
    def __init__(self, *, symbol: str = ..., qty: int = ...) -> None: ...

class CreateAccountRequest(Message):
    agent_id: str
    cash_ticks: int
    positions: Sequence[PositionEntry]
    def __init__(
        self,
        *,
        agent_id: str = ...,
        cash_ticks: int = ...,
        positions: Sequence[PositionEntry] = ...,
    ) -> None: ...

class CreateAccountResponse(Message):
    ok: bool
    reason: str
    def __init__(self, *, ok: bool = ..., reason: str = ...) -> None: ...

class GetPortfolioRequest(Message):
    agent_id: str
    def __init__(self, *, agent_id: str = ...) -> None: ...

class GetPortfolioResponse(Message):
    found: bool
    cash: int
    reserved_cash: int
    positions: Sequence[PositionEntry]
    reserved_shares: Sequence[PositionEntry]
    def __init__(
        self,
        *,
        found: bool = ...,
        cash: int = ...,
        reserved_cash: int = ...,
        positions: Sequence[PositionEntry] = ...,
        reserved_shares: Sequence[PositionEntry] = ...,
    ) -> None: ...
